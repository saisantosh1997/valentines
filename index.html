<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>Cupid Never Misses ‚ù§Ô∏è</title>

<style>
* { box-sizing: border-box; font-family: 'Arial Rounded MT Bold', system-ui, sans-serif; }

body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle, #ffe6ef, #f7a1b5);
  overflow: hidden;
  touch-action: none;
}

.screen {
  position: absolute;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 24px;
}

.screen.active { display: flex; }

button {
  background: #ff3366;
  color: white;
  border: none;
  padding: 14px 26px;
  font-size: 18px;
  border-radius: 30px;
  margin-top: 20px;
  box-shadow: 0 6px 0 #c4003a;
}

#score {
  position: absolute;
  top: 14px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 20px;
  color: #8b0030;
}

#titleText {
  position: absolute;
  top: 60px;
  width: 100%;
  text-align: center;
  color: #8b0030;
}

#board {
  position: absolute;
  top: 120px;
  left: 50%;
  transform: translateX(-50%);
  width: 240px;
  height: 240px;
  border-radius: 50%;
  background:
    radial-gradient(circle,
      #ff3366 0 18%,
      #ffffff 18% 36%,
      #ff3366 36% 54%,
      #ffffff 54% 72%,
      #ff3366 72% 100%);
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}

#arrow {
  position: absolute;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%) rotate(-45deg);
  font-size: 34px;
}

.hit { position: absolute; font-size: 24px; }

.message {
  position: absolute;
  left: 50%;
  top: 70%;
  transform: translateX(-50%);
  font-size: 14px;
  color: #8b0030;
  opacity: 0;
  animation: floatUp 1.6s ease-out forwards;
}

@keyframes floatUp {
  0% { opacity: 0; transform: translate(-50%, 10px); }
  30% { opacity: 1; }
  100% { opacity: 0; transform: translate(-50%, -40px); }
}

/* Confetti */
.confetti {
  position: absolute;
  width: 8px;
  height: 8px;
  background: red;
  animation: fall 3s linear forwards;
}

@keyframes fall {
  to { transform: translateY(100vh) rotate(360deg); }
}
</style>
</head>

<body>

<!-- START SCREEN -->
<div id="startScreen" class="screen active">
  <div>
    <h1>Win this game üíò</h1>
    <p>to be my Valentine</p>
    <button onclick="startGame()">Start</button>
  </div>
</div>

<!-- GAME SCREEN -->
<div id="gameScreen" class="screen">
  <div id="score">üèπ 0 / 14</div>

  <div id="titleText">
    <strong>Keerth</strong><br/>
    Will you be my Valentine?
  </div>

  <div id="board"></div>
  <div id="arrow">üèπ</div>
</div>

<!-- FINAL SCREEN -->
<div id="endScreen" class="screen">
  <div>
    <img src="./keerth.JPG" style="width:220px;border-radius:16px;box-shadow:0 8px 20px rgba(0,0,0,0.2)" />
    <h1>You Win My Heart ‚ù§Ô∏è</h1>
    <p>
      You didn‚Äôt just win the game.<br/>
      You already had me.
    </p>
  </div>
</div>

<audio id="throwSound" src="https://assets.mixkit.co/sfx/preview/mixkit-fast-small-sweep-transition-166.wav"></audio>
<audio id="hitSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.wav"></audio>

<script>
const startScreen = document.getElementById('startScreen');
const gameScreen = document.getElementById('gameScreen');
const endScreen = document.getElementById('endScreen');
const arrow = document.getElementById('arrow');
const board = document.getElementById('board');
const scoreEl = document.getElementById('score');

let score = 0;
const TARGET = 14;
let startY = null;
let shooting = false;

const messages = [
  'Almost missed‚Ä¶ but love never does',
  'Cupid adjusted the aim üòâ',
  'Straight to the heart',
  'That one was destiny',
  'Love always finds a way',
  'Perfect shot üíò',
  'Right where it belongs',
  'Fate did that',
  'Love never misses',
  'Written in the stars ‚ú®'
];

function startGame() {
  startScreen.classList.remove('active');
  gameScreen.classList.add('active');
}

function cleanupGameArtifacts() {
  document.querySelectorAll('.hit, .message').forEach(el => el.remove());
}

function popConfetti() {
  const colors = ['#ff3366', '#ff99aa', '#ffd1dc', '#ffffff'];
  const count = 140;

  for (let i = 0; i < count; i++) {
    const confetti = document.createElement('div');
    confetti.style.position = 'fixed';
    confetti.style.width = '8px';
    confetti.style.height = '8px';
    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.left = '50%';
    confetti.style.top = '50%';
    confetti.style.pointerEvents = 'none';
    confetti.style.zIndex = '999';

    const angle = Math.random() * Math.PI * 2;
    const velocity = Math.random() * 7 + 3;
    let xVel = Math.cos(angle) * velocity;
    let yVel = Math.sin(angle) * velocity;
    let x = 0;
    let y = 0;
    const gravity = 0.18; // slower fall

    document.body.appendChild(confetti);

    function animate() {
      x += xVel;
      y += yVel;
      yVel += gravity;

      confetti.style.transform =
        `translate(${x}px, ${y}px) rotate(${x * 4}deg)`;

      if (y < window.innerHeight + 40) {
        requestAnimationFrame(animate);
      } else {
        confetti.remove();
      }
    }

    animate();
  }
}

function showMessage() {
  setTimeout(() => {
    const msg = document.createElement('div');
    msg.className = 'message';
    msg.textContent = messages[Math.floor(Math.random() * messages.length)];
    document.body.appendChild(msg);

    setTimeout(() => msg.remove(), 3000); // stays longer
  }, 300); // delayed reveal
}

function shootArrow() {
  if (shooting) return;
  shooting = true;

  const boardRect = board.getBoundingClientRect();
  const hitX = boardRect.left + boardRect.width / 2 + (Math.random() * 70 - 35);
  const hitY = boardRect.top + boardRect.height / 2 + (Math.random() * 70 - 35);

  arrow.animate([
    { transform: `translate(-50%,0) rotate(-45deg)` },
    { transform: `translate(${hitX - innerWidth / 2}px, ${hitY - innerHeight + 60}px) rotate(0deg)` }
  ], { duration: 320, easing: 'ease-out' });

  setTimeout(() => {
    const hit = document.createElement('div');
    hit.className = 'hit';
    hit.textContent = Math.random() > 0.5 ? 'üåπ' : 'üíã';
    hit.style.left = hitX + 'px';
    hit.style.top = hitY + 'px';
    document.body.appendChild(hit);

    showMessage();
    score++;
    scoreEl.textContent = `üèπ ${score} / ${TARGET}`;

    if (score >= TARGET) {
      cleanupGameArtifacts();
      popConfetti();

      setTimeout(() => {
        gameScreen.classList.remove('active');
        endScreen.classList.add('active');
      }, 2800); // longer celebration
    }

    shooting = false;
  }, 360);
}

document.addEventListener('touchstart', e => startY = e.touches[0].clientY);
document.addEventListener('touchend', e => {
  if (startY && startY - e.changedTouches[0].clientY > 40) shootArrow();
  startY = null;
});
document.addEventListener('click', shootArrow);
</script>

</body>
</html>
